import{d as me,y as D,c as h,W as fe,X as he,Y as ge,aE as xe,aF as ye,b as I,a4 as be,C as g,aY as U,br as $,b3 as A,w as T,n as Se,a2 as _e,L as pe,g as b,ae as k,a6 as B,bs as Te,bt as J,aJ as Ce,bu as Y,bv as we,P as Ve}from"./index-DfK_AuQa.js";import{F as ze,u as Ne}from"./index-jWhfq8_6.js";import{o as Fe}from"./omit-BSm0-P2Q.js";/**
 * tdesign v1.13.2
 * (c) 2025 tdesign
 * @license MIT
 */var Ie={allowInputOverMax:Boolean,autofocus:Boolean,autosize:{type:[Boolean,Object],default:!1},disabled:{type:Boolean,default:void 0},maxcharacter:{type:Number},maxlength:{type:[String,Number]},name:{type:String,default:""},placeholder:{type:String,default:void 0},readonly:{type:Boolean,default:void 0},status:{type:String,default:"default",validator:function(e){return e?["default","success","warning","error"].includes(e):!0}},tips:{type:[String,Function]},value:{type:[String,Number],default:void 0},modelValue:{type:[String,Number],default:void 0},defaultValue:{type:[String,Number]},onBlur:Function,onChange:Function,onFocus:Function,onKeydown:Function,onKeypress:Function,onKeyup:Function,onValidate:Function};/**
 * tdesign v1.13.2
 * (c) 2025 tdesign
 * @license MIT
 */var Ae=`
  min-height:0 !important;
  max-height:none !important;
  height:0 !important;
  visibility:hidden !important;
  overflow:hidden !important;
  position:absolute !important;
  z-index:-1000 !important;
  top:0 !important;
  right:0 !important
`,i;function W(S){var e,_=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;i||(i=document.createElement("textarea"),document.body.appendChild(i));var x=Te(S),c=x.paddingSize,o=x.borderSize,C=x.boxSizing,w=x.sizingStyle;i.setAttribute("style","".concat(w,";").concat(Ae)),i.value=S.value||S.placeholder||"";var v=i.scrollHeight,p={},V=C==="border-box",E=C==="content-box";V?v+=o:E&&(v-=c),i.value="";var z=i.scrollHeight-c;(e=i)===null||e===void 0||(e=e.parentNode)===null||e===void 0||e.removeChild(i),i=null;var r=function(F){var s=z*F;return V&&(s=s+c+o),s};if(!J(_)){var N=r(_);v=Math.max(N,v),p.minHeight="".concat(N,"px")}return J(f)||(v=Math.min(r(f),v)),p.height="".concat(v,"px"),p}var Be=me({name:"TTextarea",inheritAttrs:!1,props:Ie,setup:function(e,_){var f=_.attrs,x=_.expose,c=D(),o=D("textarea"),C=h(function(){return"".concat(o.value,"__tips")}),w=h(function(){return"".concat(o.value,"__limit")}),v=fe(e),p=v.value,V=v.modelValue,E=he(p,V,e.defaultValue,e.onChange),z=ge(E,2),r=z[0],N=z[1],y=xe(),F=ye(),s=I({}),l=I(),K=I(!1),H=I(!1),q=function(){var a;return(a=l.value)===null||a===void 0?void 0:a.focus()},G=function(){var a;return(a=l.value)===null||a===void 0?void 0:a.blur()},d=function(){var a;if(e.autosize===!0)B(function(){s.value=W(l.value)});else if(e.autosize&&A(e.autosize)==="object"){var n=e.autosize,u=n.minRows,m=n.maxRows;B(function(){s.value=W(l.value,u,m)})}else f.rows?s.value={height:"auto",minHeight:"auto"}:f.style&&(a=l.value)!==null&&a!==void 0&&(a=a.style)!==null&&a!==void 0&&a.height&&(s.value={height:l.value.style.height})},Q=function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",n=l.value,u=String(a);n&&n.value!==u&&(n.value=u,r.value=u)},L=function(a){var n=a.target,u=n.value;if(e.maxcharacter&&e.maxcharacter>=0){var m=$(u,e.maxcharacter);u=A(m)==="object"&&m.characters}!H.value&&N(u,{e:a}),B(function(){return Q(u)}),d()},Z=function(a){L(a)},ee=function(){H.value=!0},ae=function(a){H.value=!1,L(a)},R=function(a,n){var u;if(!y.value){var m="on".concat(a[0].toUpperCase()).concat(a.slice(1));(u=e[m])===null||u===void 0||u.call(e,r.value,{e:n})}},te=function(a){R("keydown",a)},ne=function(a){R("keyup",a)},ue=function(a){R("keypress",a)},re=function(a){var n;d(),!y.value&&(K.value=!0,(n=e.onFocus)===null||n===void 0||n.call(e,r.value,{e:a}))},M=be(ze,void 0),le=function(a){var n;a.target&&(d(),K.value=!1,(n=e.onBlur)===null||n===void 0||n.call(e,r.value,{e:a}),M==null||M.handleBlur())},ie=h(function(){return[o.value,g(g({},"".concat(c.value,"-is-disabled"),y.value),"".concat(c.value,"-is-readonly"),F.value)]}),oe=h(function(){return U({autofocus:e.autofocus,disabled:y.value,readonly:F.value,placeholder:e.placeholder,maxlength:!e.allowInputOverMax&&e.maxlength||void 0,name:e.name||void 0})}),ve=h(function(){var t=$(String(r.value||""));return A(t)==="object"?t.length:t}),se=h(function(){return{value:[void 0,null].includes(r.value)?void 0:String(r.value),status:e.status,maxlength:Number(e.maxlength),maxcharacter:e.maxcharacter,allowInputOverMax:e.allowInputOverMax,onValidate:e.onValidate}}),ce=Ne(se),O=ce.tStatus;T(function(){return r.value},function(){return d()}),T(l,function(t){t&&(d(),e.autofocus&&t.focus())}),T(s,function(t){var a=f.style;Ce(a)?Y(l.value,we(a,t)):Y(l.value,t)}),T(r,function(){B(function(){return d()})}),T(function(){return e.autosize},d,{deep:!0}),x({focus:q,blur:G}),Se(function(){d()});var de=pe();return function(){var t,a=U({onFocus:re,onBlur:le,onKeydown:te,onKeyup:ne,onKeypress:ue}),n=_e(),u=n.STATUS,m=h(function(){return["".concat(o.value,"__inner"),g(g(g(g({},"".concat(c.value,"-is-").concat(O.value),O.value),u.value.disabled,y.value),u.value.focused,K.value),"".concat(c.value,"-resize-none"),A(e.autosize)==="object"),"narrow-scrollbar"]}),P=de("tips"),j=P&&b("div",{class:"".concat(C.value," ").concat(o.value,"__tips--").concat(e.status||"normal")},[P]),X=e.maxcharacter&&b("span",{class:w.value},["".concat(ve.value,"/").concat(e.maxcharacter)])||!e.maxcharacter&&e.maxlength&&b("span",{class:w.value},["".concat(r.value?(t=String(r.value))===null||t===void 0?void 0:t.length:0,"/").concat(e.maxlength)]);return b("div",k({class:ie.value},Fe(f,["style"])),[b("textarea",k({onInput:Z,onCompositionstart:ee,onCompositionend:ae,ref:l,value:r.value,class:m.value},a,oe.value),null),j||X?b("div",{class:["".concat(o.value,"__info_wrapper"),g({},"".concat(o.value,"__info_wrapper_align"),!j)]},[j,X]):null])}}});/**
 * tdesign v1.13.2
 * (c) 2025 tdesign
 * @license MIT
 */var Re=Ve(Be);export{Re as T};
