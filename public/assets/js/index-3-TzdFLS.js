import{p as N,d as T,b as y,n as M,h as I,g as t,e as _,l as P,f as e,F as z,M as w,i as o,t as l,j as c,k as R,o as r,m as j}from"./index-Duc-iBXa.js";import{L as q,a as E,c as U}from"./copy-y6COQ_AE.js";import{f as x}from"./format-DT0ULrHg.js";import{C as $,I as A,S as G}from"./index-wWVzXTvK.js";import{F as H,a as J}from"./index-C4XwCDNa.js";import{B as K}from"./useResizeObserver-sH3_gnCw.js";import{D as O,a as Q}from"./index-ClR4HYmV.js";import{T as W}from"./index-CDdTQqfh.js";import"./useVirtualScrollNew-C-8mtezf.js";import"./debounce-EO_ftbRx.js";import"./omit-BwDkX3A7.js";const X=d=>N.request("get","/user/token",{params:d}),ie=T({__name:"index",setup(d){const u=y({token:localStorage.getItem("token")??""}),a=y({token:"",count:0,size:0,remaining_count:0,remaining_size:0,ip:[],used_at:"",expires_at:""}),B={},p=async({validateResult:f})=>{if(f!==!0)return;u.value.token===""&&(u.value.token="guest");const n=await X(u.value);a.value=n.data,localStorage.setItem("token",u.value.token),w.success("查询成功")};return M(()=>{p({validateResult:!0})}),(f,n)=>{const C=A,k=J,v=K,m=G,V=H,g=$,s=O,b=W,F=E,S=q,D=Q;return r(),I(z,null,[t(g,null,{default:e(()=>[t(V,{data:u.value,rules:B,onSubmit:p},{default:e(()=>[t(k,{name:"token",label:"卡密"},{default:e(()=>[t(C,{modelValue:u.value.token,"onUpdate:modelValue":n[0]||(n[0]=i=>u.value.token=i)},null,8,["modelValue"])]),_:1}),t(k,null,{default:e(()=>[t(m,{size:"small"},{default:e(()=>[t(v,{type:"submit"},{default:e(()=>n[1]||(n[1]=[o(" 查询 ")])),_:1})]),_:1})]),_:1})]),_:1},8,["data"])]),_:1}),a.value.token!==""?(r(),_(g,{key:0},{default:e(()=>[t(D,{layout:"vertical",bordered:"",colon:""},{default:e(()=>[t(s,{label:"卡密"},{default:e(()=>[o(l(a.value.token),1)]),_:1}),t(s,{label:"计划下载次数"},{default:e(()=>[o(l(a.value.count),1)]),_:1}),t(s,{label:"剩余下载次数"},{default:e(()=>[o(l(a.value.remaining_count),1)]),_:1}),t(s,{label:"计划下载大小"},{default:e(()=>[o(l(c(x)(a.value.size)),1)]),_:1}),t(s,{label:"剩余下载大小"},{default:e(()=>[o(l(c(x)(a.value.remaining_size)),1)]),_:1}),t(s,{label:"IP"},{default:e(()=>[a.value.ip.length===0?(r(),_(b,{key:0,size:"large"},{default:e(()=>n[2]||(n[2]=[o(" 没有绑定的IP ")])),_:1})):(r(),_(S,{key:1,stripe:"",split:"",size:"large"},{default:e(()=>[(r(!0),I(z,null,R(a.value.ip,(i,L)=>(r(),_(F,{key:i},{default:e(()=>[t(m,{direction:"vertical"},{default:e(()=>[t(m,null,{default:e(()=>[t(b,{size:"large"},{default:e(()=>[o(" 第 "+l(L+1)+" 条 ",1)]),_:2},1024),t(v,{onClick:Y=>c(U)(i)},{default:e(()=>n[3]||(n[3]=[o("复制")])),_:2},1032,["onClick"])]),_:2},1024),j("p",null,l(i),1)]),_:2},1024)]),_:2},1024))),128))]),_:1}))]),_:1}),t(s,{label:"使用日期"},{default:e(()=>[o(l(a.value.used_at??"未使用"),1)]),_:1}),t(s,{label:"过期日期"},{default:e(()=>[o(l(a.value.expires_at??"未使用"),1)]),_:1})]),_:1})]),_:1})):P("",!0)],64)}}});export{ie as default};
