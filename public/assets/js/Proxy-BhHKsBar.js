import{p as d,d as v,b as P,n as $,e as h,f as o,g as e,i as f,M as u,o as w}from"./index-Duc-iBXa.js";import{C,I as T,S}from"./index-wWVzXTvK.js";import{a as F,F as N}from"./index-C4XwCDNa.js";import{S as k}from"./index-CG-I9pQ1.js";import{B}from"./useResizeObserver-sH3_gnCw.js";const I=()=>d.request("get","/admin/config/proxy"),q=m=>d.request("patch","/admin/config/proxy",{data:m}),M=()=>d.request("post","/admin/config/proxy/test_proxy"),D=v({__name:"Proxy",setup(m){const a=P({enable:!1,http:"",https:""}),_={},p=async()=>{const s=await I();a.value=s.data};$(p);const V=async({validateResult:s})=>{s===!0&&(await q(a.value),u.success("保存成功"),await p())},b=async()=>{const t=(await M()).data;t.data&&t.success?(u.success("测试成功"),[`当前IP: ${t.data.ip}`,`当前地区: ${t.data.actionAddress[0]}`,`运营商: ${t.data.isp}`,`网络类型: ${t.data.netWorkType}`,`是否为代理: ${t.data.proxy?"代理":"非代理"}`,`是否为VPN: ${t.data.vpn?"VPN":"非VPN"}`,`是否为蜘蛛: ${t.data.spider?"蜘蛛":"非蜘蛛"}`,`是否为洋葱: ${t.data.tor?"洋葱":"非洋葱"}`].forEach(r=>u.success(r,5e3))):u.success(`测试失败：${t.message}`)};return(s,t)=>{const r=k,l=F,c=T,i=B,g=S,y=N,x=C;return w(),h(x,null,{default:o(()=>[e(y,{data:a.value,rules:_,onSubmit:V,labelWidth:130},{default:o(()=>[e(l,{name:"enable",label:"启用代理"},{default:o(()=>[e(r,{modelValue:a.value.enable,"onUpdate:modelValue":t[0]||(t[0]=n=>a.value.enable=n)},null,8,["modelValue"])]),_:1}),e(l,{name:"http",label:"HTTP代理"},{default:o(()=>[e(c,{modelValue:a.value.http,"onUpdate:modelValue":t[1]||(t[1]=n=>a.value.http=n)},null,8,["modelValue"])]),_:1}),e(l,{name:"https",label:"HTTPS代理"},{default:o(()=>[e(c,{modelValue:a.value.https,"onUpdate:modelValue":t[2]||(t[2]=n=>a.value.https=n)},null,8,["modelValue"])]),_:1}),e(l,null,{default:o(()=>[e(g,{size:"small"},{default:o(()=>[e(i,{type:"submit"},{default:o(()=>t[3]||(t[3]=[f(" 保存 ")])),_:1}),e(i,{onClick:b},{default:o(()=>t[4]||(t[4]=[f(" 测试代理 ")])),_:1})]),_:1})]),_:1})]),_:1},8,["data"])]),_:1})}}});export{D as default};
