import{p as f,d as C,a as k,b as p,n as S,e as h,f as n,g as e,i as x,o as F,M as I}from"./index-4j4i65ng.js";import{C as q,I as B,S as L}from"./index-BcnoAF9p.js";import{a as M,F as T}from"./index-fB0uZVW9.js";import{S as N}from"./index-CLevCgMW.js";import{T as J}from"./index--5rr-cdB.js";import{I as P}from"./index-B3ApcfOe.js";import{B as R}from"./useResizeObserver-Bxcglxae.js";import"./omit-CQi6EPot.js";import"./add-BmKQsIE8.js";const z=()=>f.request("get","/admin/config/general"),D=_=>f.request("patch","/admin/config/general",{data:_}),G="2.2.4",H={version:G},Z=C({__name:"General",setup(_){const v=k(),o=p({new_admin_password:"",parse_password:"",show_announce:!1,announce:"",custom_script:"",custom_button:"",debug:!1,show_hero:!1,name:"",logo:"",disable_check_rand:!0,save_histories_day:7}),d=p({admin_password:"",version:"",frontend_version:"",parse_password:"",show_announce:!1,announce:"",custom_script:"",custom_button:"",debug:!1,show_hero:!1,name:"",logo:"",disable_check_rand:!0,save_histories_day:7}),V={name:[{required:!0,message:"请输入站点名称"}],logo:[{required:!0,message:"请输入站点Logo"}]},i=async()=>{const u=await z();o.value={...u.data,new_admin_password:u.data.admin_password},d.value={...u.data,frontend_version:H.version}};S(i);const b=async({validateResult:u})=>{u===!0&&(await D(o.value),I.success("保存成功"),await v.getConfig(),await i())};return(u,a)=>{const s=B,t=M,m=N,r=J,w=P,g=R,c=L,U=T,y=q;return F(),h(y,null,{default:n(()=>[e(U,{data:o.value,rules:V,onSubmit:b,labelWidth:130},{default:n(()=>[e(t,{name:"frontend_version",label:"前端版本"},{default:n(()=>[e(s,{modelValue:d.value.frontend_version,"onUpdate:modelValue":a[0]||(a[0]=l=>d.value.frontend_version=l),disabled:""},null,8,["modelValue"])]),_:1}),e(t,{name:"version",label:"后端版本"},{default:n(()=>[e(s,{modelValue:d.value.version,"onUpdate:modelValue":a[1]||(a[1]=l=>d.value.version=l),disabled:""},null,8,["modelValue"])]),_:1}),e(t,{name:"new_admin_password",label:"新管理员密码"},{default:n(()=>[e(s,{modelValue:o.value.new_admin_password,"onUpdate:modelValue":a[2]||(a[2]=l=>o.value.new_admin_password=l),type:"password"},null,8,["modelValue"])]),_:1}),e(t,{name:"parse_password",label:"解析密码"},{default:n(()=>[e(s,{modelValue:o.value.parse_password,"onUpdate:modelValue":a[3]||(a[3]=l=>o.value.parse_password=l),type:"password"},null,8,["modelValue"])]),_:1}),e(t,{name:"show_announce",label:"显示公告"},{default:n(()=>[e(m,{modelValue:o.value.show_announce,"onUpdate:modelValue":a[4]||(a[4]=l=>o.value.show_announce=l)},null,8,["modelValue"])]),_:1}),e(t,{name:"announce",label:"公告",help:"支持HTML"},{default:n(()=>[e(r,{modelValue:o.value.announce,"onUpdate:modelValue":a[5]||(a[5]=l=>o.value.announce=l)},null,8,["modelValue"])]),_:1}),e(t,{name:"custom_script",label:"自定义JS脚本",help:"无需script标签"},{default:n(()=>[e(r,{modelValue:o.value.custom_script,"onUpdate:modelValue":a[6]||(a[6]=l=>o.value.custom_script=l)},null,8,["modelValue"])]),_:1}),e(t,{name:"custom_button",label:"自定义按钮",help:"按钮名称|点击跳转的链接 每行一个"},{default:n(()=>[e(r,{modelValue:o.value.custom_button,"onUpdate:modelValue":a[7]||(a[7]=l=>o.value.custom_button=l)},null,8,["modelValue"])]),_:1}),e(t,{name:"debug",label:"启用调试模式"},{default:n(()=>[e(m,{modelValue:o.value.debug,"onUpdate:modelValue":a[8]||(a[8]=l=>o.value.debug=l)},null,8,["modelValue"])]),_:1}),e(t,{name:"name",label:"站点名称"},{default:n(()=>[e(s,{modelValue:o.value.name,"onUpdate:modelValue":a[9]||(a[9]=l=>o.value.name=l)},null,8,["modelValue"])]),_:1}),e(t,{name:"logo",label:"站点Logo",help:"请填写正确的URL"},{default:n(()=>[e(s,{modelValue:o.value.logo,"onUpdate:modelValue":a[10]||(a[10]=l=>o.value.logo=l)},null,8,["modelValue"])]),_:1}),e(t,{name:"show_hero",label:"显示站点信息"},{default:n(()=>[e(m,{modelValue:o.value.show_hero,"onUpdate:modelValue":a[11]||(a[11]=l=>o.value.show_hero=l)},null,8,["modelValue"])]),_:1}),e(t,{name:"disable_check_rand",label:"禁用接口参数校验"},{default:n(()=>[e(m,{modelValue:o.value.disable_check_rand,"onUpdate:modelValue":a[12]||(a[12]=l=>o.value.disable_check_rand=l)},null,8,["modelValue"])]),_:1}),e(t,{name:"save_histories_day",label:"解析记录保留天数"},{default:n(()=>[e(w,{min:7,modelValue:o.value.save_histories_day,"onUpdate:modelValue":a[13]||(a[13]=l=>o.value.save_histories_day=l)},null,8,["modelValue"])]),_:1}),e(t,null,{default:n(()=>[e(c,{size:"small"},{default:n(()=>[e(g,{type:"submit"},{default:n(()=>a[14]||(a[14]=[x(" 保存 ")])),_:1})]),_:1})]),_:1})]),_:1},8,["data"])]),_:1})}}});export{Z as default};
