import{e as je,i as Fe,V as T,b as De,_ as A,f as Pe,c as We,r as y,v as xe,s as Oe,F as He}from"./index-jWhfq8_6.js";import{d as Ae,v as Ke,x as Ue,a4 as Ge,y as Z,c as d,C as I,b as k,V as Ie,be as ve,W as we,af as Re,n as Je,A as Xe,w as ke,aH as Ee,L as $e,g as F,N as Ce,I as Ye,K as ze,E as Qe,a6 as Ze,a1 as ce,ac as Q,bO as er,Y as _e,bk as rr,P as Be}from"./index-DfK_AuQa.js";/**
 * tdesign v1.13.2
 * (c) 2025 tdesign
 * @license MIT
 */var ar={for:{type:String,default:""},help:{type:[String,Function]},label:{type:[String,Function],default:""},labelAlign:{type:String,validator:function(e){return e?["left","right","top"].includes(e):!0}},labelWidth:{type:[String,Number]},name:{type:String,default:""},requiredMark:{type:Boolean,default:void 0},rules:{type:Array},showErrorMessage:{type:Boolean,default:void 0},status:{type:String,default:""},statusIcon:{type:[Boolean,Function],default:void 0},successBorder:Boolean,tips:{type:[String,Function]}};/**
 * tdesign v1.13.2
 * (c) 2025 tdesign
 * @license MIT
 */function tr(c,e){return c.replace(/\${(.*?)}/g,function(S,b){return e[b.trim()]||""})}function Ve(c,e){var S=Object.keys(c);if(Object.getOwnPropertySymbols){var b=Object.getOwnPropertySymbols(c);e&&(b=b.filter(function(_){return Object.getOwnPropertyDescriptor(c,_).enumerable})),S.push.apply(S,b)}return S}function Le(c){for(var e=1;e<arguments.length;e++){var S=arguments[e]!=null?arguments[e]:{};e%2?Ve(Object(S),!0).forEach(function(b){I(c,b,S[b])}):Object.getOwnPropertyDescriptors?Object.defineProperties(c,Object.getOwnPropertyDescriptors(S)):Ve(Object(S)).forEach(function(b){Object.defineProperty(c,b,Object.getOwnPropertyDescriptor(S,b))})}return c}function Ne(c,e){return e?"".concat(c,"__").concat(e).replace(/(\[|\]\.)/g,"_"):""}var nr=Ae({name:"TFormItem",props:ar,setup:function(e,S){var b=S.slots,_=$e(),m=je(),fe=Ke("form"),K=fe.globalConfig,R=Ue({CheckCircleFilledIcon:ze,CloseCircleFilledIcon:We,ErrorCircleFilledIcon:Ye}),L=R.CheckCircleFilledIcon,E=R.CloseCircleFilledIcon,de=R.ErrorCircleFilledIcon,r=Ge(Pe,void 0),ee=Z(),re=Z("form-item"),ae=d(function(){var a,t,n=(a=(t=e.requiredMark)!==null&&t!==void 0?t:r==null?void 0:r.requiredMark)!==null&&a!==void 0?a:K.value.requiredMark,g=f.value.filter(function(i){return i.required}).length>0;return n??g}),me=d(function(){var a;return(a=r==null?void 0:r.requiredMarkPosition)!==null&&a!==void 0?a:K.value.requiredMarkPosition}),te=d(function(){return b.label||e.label}),ge=d(function(){return!!(r!=null&&r.colon&&te.value)}),q=Z("form__label"),D=d(function(){return Fe(e.labelAlign)?r==null?void 0:r.labelAlign:e.labelAlign}),w=d(function(){return Fe(e.labelWidth)?r==null?void 0:r.labelWidth:e.labelWidth}),ye=d(function(){return[m.value.label,I(I(I(I(I({},"".concat(q.value,"--required"),ae.value),"".concat(q.value,"--required-right"),ae.value&&me.value==="right"),"".concat(q.value,"--top"),te.value&&(D.value==="top"||!w.value)),"".concat(q.value,"--left"),D.value==="left"&&w.value),"".concat(q.value,"--right"),D.value==="right"&&w.value)]}),ne=d(function(){return"".concat(ee.value,"-is-").concat(e.status||"default"," ").concat(e.status==="success"?m.value.successBorder:"")}),be=function(){if(Number(w.value)!==0){var t={};return w.value&&D.value!=="top"&&(Ie(w.value)?t={width:"".concat(w.value,"px")}:t={width:w.value}),F("div",{class:ye.value,style:t},[F("label",{for:e.for||null},[_("label")]),ge.value&&K.value.colonText])}},X=function(){var t=function(v){return F("span",{class:m.value.status},[F(v,null,null)])},n=V.value;if(B.value===T.SUCCESS)return t(L);if(n!=null&&n[0]){var g=n[0].type||"error",i={error:E,warning:de}[g]||L;return t(i)}return null},he=function(){var t=e.statusIcon;if(t!==!1){var n=_("statusIcon",{defaultNode:X()});if(n)return F("span",{class:m.value.status},[n]);if(n!==!1&&(n=r==null?void 0:r.renderContent("statusIcon",{defaultNode:X(),params:e}),n))return n}},U=d(function(){if(!x.value)return"";if(B.value===T.SUCCESS)return e.successBorder?[m.value.success,m.value.successBorder].join(" "):m.value.success;if(V.value.length){var a=V.value[0].type||"error";return e.status?ne.value:a==="error"?m.value.error:m.value.warning}}),le=d(function(){return[m.value.controls,U.value]}),ue=d(function(){var a={};return w.value&&D.value!=="top"&&(Ie(w.value)?a={marginLeft:"".concat(w.value,"px")}:a={marginLeft:w.value}),a}),V=k([]),$=k([]),B=k(T.TO_BE_VALIDATED),Y=k(!1),N=k(!1),z=function(){N.value=!1,V.value=[],$.value=[],B.value=T.TO_BE_VALIDATED},pe=function(){var t=Object.prototype.toString.call(ve(r==null?void 0:r.data,e.name)),n;return t==="[object String]"&&(n=""),t==="[object Array]"&&(n=[]),t==="[object Object]"&&(n={}),n},Se=function(){var a=A(y.mark(function t(){var n,g=arguments;return y.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(n=g.length>0&&g[0]!==void 0?g[0]:r==null?void 0:r.resetType,e.name){i.next=1;break}return i.abrupt("return");case 1:return n==="empty"?Oe(r==null?void 0:r.data,e.name,pe()):n==="initial"&&Oe(r==null?void 0:r.data,e.name,C.value),i.next=2,Ze();case 2:Y.value?N.value=!0:z();case 3:case"end":return i.stop()}},t)}));return function(){return a.apply(this,arguments)}}(),ie=d(function(){var a;return(a=r==null?void 0:r.errorMessage)!==null&&a!==void 0?a:K.value.errorMessage}),f=d(function(){var a;if((a=e.rules)!==null&&a!==void 0&&a.length)return e.rules;if(!e.name)return[];var t="".concat(e.name).lastIndexOf(".")||-1,n="".concat(e.name).slice(t+1);return ve(r==null?void 0:r.rules,e.name)||ve(r==null?void 0:r.rules,n)||[]}),l=function(){var a=A(y.mark(function t(n){var g,i;return y.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(i={successList:[],errorList:[],rules:[],resultList:[],allowSetValue:!1},i.rules=n==="all"?f.value:f.value.filter(function(v){return(v.trigger||"change")===n}),!(f.value.length&&!((g=i.rules)!==null&&g!==void 0&&g.length))){p.next=1;break}return p.abrupt("return",i);case 1:return i.allowSetValue=!0,p.next=2,xe(h.value,i.rules);case 2:return i.resultList=p.sent,i.errorList=i.resultList.filter(function(v){return v.result!==!0}).map(function(v){return Object.keys(v).forEach(function(G){if(!v.message&&ie.value[G]){var oe=Qe(e.label)?e.label:e.name;v.message=tr(ie.value[G],{name:oe,validate:v[G]})}}),v}),i.successList=i.resultList.filter(function(v){return v.result===!0&&v.message&&v.type==="success"}),p.abrupt("return",i);case 3:case"end":return p.stop()}},t)}));return function(n){return a.apply(this,arguments)}}(),u=function(){var a=A(y.mark(function t(n,g){var i,p,v,G,oe,Me;return y.wrap(function(J){for(;;)switch(J.prev=J.next){case 0:return Y.value=!0,O.value=g,J.next=1,l(n);case 1:return i=J.sent,p=i.successList,v=i.errorList,G=i.rules,oe=i.resultList,Me=i.allowSetValue,Me&&($.value=p,V.value=v),G.length&&(B.value=v.length?T.FAIL:T.SUCCESS),N.value&&z(),Y.value=!1,J.abrupt("return",I({},e.name,v.length===0?!0:oe));case 2:case"end":return J.stop()}},t)}));return function(n,g){return a.apply(this,arguments)}}(),s=function(){var a=A(y.mark(function t(n){var g,i,p;return y.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.next=1,l(n);case 1:return g=v.sent,i=g.errorList,p=g.resultList,v.abrupt("return",I({},e.name,i.length===0?!0:p));case 2:case"end":return v.stop()}},t)}));return function(n){return a.apply(this,arguments)}}(),o=function(t){!t&&!Ce(t)||(t.length===0&&(V.value=[],B.value=T.SUCCESS),V.value=t.map(function(n){return Le(Le({},n),{},{result:!1})}),B.value=T.FAIL)},h=d(function(){return(r==null?void 0:r.data)&&ve(r==null?void 0:r.data,e.name)}),C=k(void 0),j=we(e),W=j.name,M=Re({name:W,resetHandler:z,resetField:Se,validate:u,validateOnly:s,setValidateMessage:o});Je(function(){C.value=De(h.value),r==null||r.children.push(M)}),Xe(function(){r&&(r.children=r==null?void 0:r.children.filter(function(a){return a!==M}))}),ke(h,A(y.mark(function a(){return y.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=1,u("change");case 1:case"end":return t.stop()}},a)})),{deep:!0}),ke(function(){return[e.name,JSON.stringify(e.rules)].join(",")},function(){u("change")});var O=k(void 0),x=d(function(){return Ee(O.value)?O.value:Ee(e.showErrorMessage)?e.showErrorMessage:r==null?void 0:r.showErrorMessage}),se=d(function(){return[m.value.formItem,Ne(re.value,e.name),I(I({},m.value.formItemWithHelp,P.value),m.value.formItemWithExtra,H.value)]}),P=d(function(){var a=_("help");return a?F("div",{class:m.value.help},[a]):null}),H=d(function(){var a,t=function(i){return F("div",{class:m.value.extra,title:i},[i])},n=V.value;return x.value&&n!==null&&n!==void 0&&(a=n[0])!==null&&a!==void 0&&a.message?t(n[0].message):$.value.length?t($.value[0].message):null}),Te=d(function(){var a=_("tips");if(!a)return null;var t=["".concat(re.value,"-tips"),"".concat(ee.value,"-tips"),ne.value];return F("div",{class:t},[a])}),qe=function(){var a=A(y.mark(function t(){return y.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=1,u("blur");case 1:case"end":return n.stop()}},t)}));return function(){return a.apply(this,arguments)}}();return ce(He,{handleBlur:qe}),function(){return F("div",{class:se.value},[be(),F("div",{class:le.value,style:ue.value},[F("div",{class:m.value.controlsContent},[_("default"),he()]),P.value,Te.value,H.value])])}}});/**
 * tdesign v1.13.2
 * (c) 2025 tdesign
 * @license MIT
 */var lr={colon:Boolean,data:{type:Object,default:function(){return{}}},disabled:{type:Boolean,default:void 0},errorMessage:{type:Object},formControlledComponents:{type:Array},id:{type:String,default:void 0},labelAlign:{type:String,default:"right",validator:function(e){return e?["left","right","top"].includes(e):!0}},labelWidth:{type:[String,Number],default:"100px"},layout:{type:String,default:"vertical",validator:function(e){return e?["vertical","inline"].includes(e):!0}},preventSubmitDefault:{type:Boolean,default:!0},readonly:{type:Boolean,default:void 0},requiredMark:{type:Boolean,default:void 0},requiredMarkPosition:{type:String,validator:function(e){return e?["left","right"].includes(e):!0}},resetType:{type:String,default:"empty",validator:function(e){return e?["empty","initial"].includes(e):!0}},rules:{type:Object},scrollToFirstError:{type:String,validator:function(e){return e?["","smooth","auto"].includes(e):!0}},showErrorMessage:{type:Boolean,default:!0},statusIcon:{type:[Boolean,Function],default:void 0},submitWithWarningMessage:Boolean,onReset:Function,onSubmit:Function,onValidate:Function};/**
 * tdesign v1.13.2
 * (c) 2025 tdesign
 * @license MIT
 */var ur=Ae({name:"TForm",props:lr,setup:function(e,S){var b=S.expose,_=$e(),m=we(e),fe=m.disabled,K=m.readonly;ce("formDisabled",{disabled:fe}),ce("formReadonly",{readonly:K});var R=k(null),L=k([]),E=we(e),de=E.showErrorMessage,r=E.labelWidth,ee=E.labelAlign,re=E.data,ae=E.colon,me=E.requiredMark,te=E.requiredMarkPosition,ge=E.rules,q=E.errorMessage,D=E.resetType;ce(Pe,Re({showErrorMessage:de,labelWidth:r,labelAlign:ee,data:re,colon:ae,requiredMark:me,requiredMarkPosition:te,rules:ge,errorMessage:q,resetType:D,children:L,renderContent:_}));var w=Z("form"),ye=je(),ne=d(function(){return[ye.value.form,I({},"".concat(w.value,"-inline"),e.layout==="inline")]}),be=Z("form-item"),X=function(l){if(Ee(l))return"";var u=Object.keys(l),s=_e(u,1),o=s[0];if(e.scrollToFirstError){var h=Ne(be.value,o);he(h)}var C=l[o];return Ce(C)?C.filter(function(j){return!j.result})[0].message:""},he=function(l){var u=R.value.getElementsByClassName(l),s=_e(u,1),o=s[0],h=e.scrollToFirstError;h&&o&&o.scrollIntoView({behavior:h})},U=function(l,u){return!u||!Ce(u)?!0:u.indexOf("".concat(l))!==-1},le=function(l){var u=l.reduce(function(s,o){return Object.assign(s||{},o)},{});return Object.keys(u).forEach(function(s){u[s]===!0&&delete u[s]}),rr(u)?!0:u},ue=function(){var f=A(y.mark(function l(u){var s,o,h,C,j,W,M,O,x,se;return y.wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return o=u||{},h=o.fields,C=o.trigger,j=C===void 0?"all":C,W=o.showErrorMessage,M=L.value.filter(function(H){return Q(H.validate)&&U(String(H.name),h)}).map(function(H){return H.validate(j,W)}),P.next=1,Promise.all(M);case 1:return O=P.sent,x=le(O),se=X(x),(s=e.onValidate)===null||s===void 0||s.call(e,{validateResult:x,firstError:se}),P.abrupt("return",x);case 2:case"end":return P.stop()}},l)}));return function(u){return f.apply(this,arguments)}}(),V=function(){var f=A(y.mark(function l(u){var s,o,h,C,j,W;return y.wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return s=u||{},o=s.fields,h=s.trigger,C=h===void 0?"all":h,j=L.value.filter(function(O){return Q(O.validateOnly)&&U(String(O.name),o)}).map(function(O){return O.validateOnly(C)}),M.next=1,Promise.all(j);case 1:return W=M.sent,M.abrupt("return",le(W));case 2:case"end":return M.stop()}},l)}));return function(u){return f.apply(this,arguments)}}(),$=k(),B=function(l){e.preventSubmitDefault&&l&&(l.preventDefault(),l.stopPropagation()),ue($.value).then(function(u){var s;(s=e.onSubmit)===null||s===void 0||s.call(e,{validateResult:u,firstError:X(u),e:l})}),$.value=void 0},Y=function(){var f=A(y.mark(function l(u){return y.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:$.value=u,er(R.value);case 1:case"end":return s.stop()}},l)}));return function(u){return f.apply(this,arguments)}}(),N=k(),z=function(l){var u;e.preventSubmitDefault&&l&&(l.preventDefault(),l.stopPropagation()),L.value.filter(function(s){var o;return Q(s.resetField)&&U(String(s.name),(o=N.value)===null||o===void 0?void 0:o.fields)}).forEach(function(s){var o;return s.resetField((o=N.value)===null||o===void 0?void 0:o.type)}),N.value=void 0,(u=e.onReset)===null||u===void 0||u.call(e,{e:l})},pe=function(l){N.value=l,R.value.reset()},Se=function(l){L.value.forEach(function(u){Q(u.resetHandler)&&U(String(u.name),l)&&u.resetHandler()})},ie=function(l){var u=Object.keys(l);if(u.length){var s=L.value.filter(function(o){return Q(o.setValidateMessage)&&u.includes("".concat(o.name))}).map(function(o){return o.setValidateMessage(l[o.name])});Promise.all(s)}};return b({validate:ue,submit:Y,reset:pe,clearValidate:Se,setValidateMessage:ie,validateOnly:V}),function(){return F("form",{ref:R,class:ne.value,onSubmit:function(l){return B(l)},onReset:function(l){return z(l)}},[_("default")])}}});/**
 * tdesign v1.13.2
 * (c) 2025 tdesign
 * @license MIT
 */var or=Be(ur),vr=Be(nr);export{or as F,vr as a};
